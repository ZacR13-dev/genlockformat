<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test PokeAPI Integration</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f6f8fa;
        }
        h1 {
            color: #24292f;
            border-bottom: 3px solid #0969da;
            padding-bottom: 10px;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: 600;
        }
        .success {
            background: #dafbe1;
            color: #0f5323;
            border-left: 4px solid #2ea44f;
        }
        .error {
            background: #ffebe9;
            color: #cf222e;
            border-left: 4px solid #cf222e;
        }
        .sprite-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .sprite-item {
            text-align: center;
            padding: 10px;
            background: #f6f8fa;
            border-radius: 6px;
        }
        .sprite-item img {
            width: 80px;
            height: 80px;
            image-rendering: pixelated;
        }
        .sprite-label {
            font-size: 12px;
            color: #57606a;
            margin-top: 5px;
        }
        button {
            background: #0969da;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 5px;
        }
        button:hover {
            background: #0860ca;
        }
        .loading {
            color: #0969da;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>üß™ Test d'int√©gration PokeAPI</h1>
    
    <div class="test-section">
        <h2>‚úÖ Test 1: Chargement du module</h2>
        <div id="test1"></div>
    </div>
    
    <div class="test-section">
        <h2>üé® Test 2: R√©cup√©ration des sprites</h2>
        <button onclick="testSprites()">Tester les sprites</button>
        <div id="test2"></div>
    </div>
    
    <div class="test-section">
        <h2>üîç Test 3: Affichage de plusieurs Pok√©mon</h2>
        <button onclick="testMultiplePokemon()">Afficher 10 Pok√©mon al√©atoires</button>
        <div id="test3"></div>
    </div>
    
    <div class="test-section">
        <h2>üìä Test 4: Donn√©es compl√®tes d'un Pok√©mon</h2>
        <button onclick="testPokemonData()">R√©cup√©rer donn√©es de Pikachu</button>
        <div id="test4"></div>
    </div>

    <script src="js/pokeapi.js"></script>
    <script>
        // Test 1: V√©rifier que le module est charg√©
        function test1() {
            const result = document.getElementById('test1');
            if (typeof window.PokeAPI !== 'undefined') {
                result.innerHTML = '<div class="test-result success">‚úÖ Module PokeAPI charg√© avec succ√®s!</div>';
                
                // Lister les fonctions disponibles
                const functions = Object.keys(window.PokeAPI);
                result.innerHTML += `<p>Fonctions disponibles: ${functions.join(', ')}</p>`;
            } else {
                result.innerHTML = '<div class="test-result error">‚ùå Module PokeAPI non charg√©!</div>';
            }
        }
        
        // Test 2: Tester les sprites
        function testSprites() {
            const result = document.getElementById('test2');
            result.innerHTML = '<div class="loading">‚è≥ Chargement des sprites...</div>';
            
            const pokemonId = 25; // Pikachu
            const sprites = window.PokeAPI.getAllPokemonSprites(pokemonId);
            
            let html = '<div class="test-result success">‚úÖ Sprites r√©cup√©r√©s avec succ√®s!</div>';
            html += '<div class="sprite-grid">';
            
            html += `
                <div class="sprite-item">
                    <img src="${sprites.front_default}" alt="Normal">
                    <div class="sprite-label">Normal</div>
                </div>
                <div class="sprite-item">
                    <img src="${sprites.front_shiny}" alt="Shiny">
                    <div class="sprite-label">‚ú® Shiny</div>
                </div>
                <div class="sprite-item">
                    <img src="${sprites.back_default}" alt="Dos">
                    <div class="sprite-label">Dos</div>
                </div>
                <div class="sprite-item">
                    <img src="${sprites.back_shiny}" alt="Dos Shiny">
                    <div class="sprite-label">‚ú® Dos Shiny</div>
                </div>
            `;
            
            html += '</div>';
            result.innerHTML = html;
        }
        
        // Test 3: Afficher plusieurs Pok√©mon
        function testMultiplePokemon() {
            const result = document.getElementById('test3');
            result.innerHTML = '<div class="loading">‚è≥ Chargement de 10 Pok√©mon...</div>';
            
            let html = '<div class="test-result success">‚úÖ Pok√©mon charg√©s!</div>';
            html += '<div class="sprite-grid">';
            
            // G√©n√©rer 10 IDs al√©atoires entre 1 et 151 (Gen 1)
            const randomIds = Array.from({length: 10}, () => Math.floor(Math.random() * 151) + 1);
            
            randomIds.forEach(id => {
                const spriteUrl = window.PokeAPI.getPokemonSpriteUrl(id);
                html += `
                    <div class="sprite-item">
                        <img src="${spriteUrl}" alt="Pokemon #${id}">
                        <div class="sprite-label">#${id}</div>
                    </div>
                `;
            });
            
            html += '</div>';
            result.innerHTML = html;
        }
        
        // Test 4: R√©cup√©rer les donn√©es compl√®tes
        async function testPokemonData() {
            const result = document.getElementById('test4');
            result.innerHTML = '<div class="loading">‚è≥ R√©cup√©ration des donn√©es de Pikachu...</div>';
            
            try {
                const data = await window.PokeAPI.fetchPokemonData(25);
                
                if (data) {
                    let html = '<div class="test-result success">‚úÖ Donn√©es r√©cup√©r√©es avec succ√®s!</div>';
                    html += `
                        <div style="background: #f6f8fa; padding: 15px; border-radius: 6px; margin-top: 10px;">
                            <h3>Pikachu (#${data.id})</h3>
                            <p><strong>Types:</strong> ${data.types.join(', ')}</p>
                            <p><strong>Taille:</strong> ${data.height / 10}m</p>
                            <p><strong>Poids:</strong> ${data.weight / 10}kg</p>
                            <h4>Stats de base:</h4>
                            <ul>
                                <li>HP: ${data.stats.hp}</li>
                                <li>Attack: ${data.stats.attack}</li>
                                <li>Defense: ${data.stats.defense}</li>
                                <li>Special Attack: ${data.stats['special-attack']}</li>
                                <li>Special Defense: ${data.stats['special-defense']}</li>
                                <li>Speed: ${data.stats.speed}</li>
                            </ul>
                            <div class="sprite-grid">
                                <div class="sprite-item">
                                    <img src="${data.sprites.official}" alt="Artwork">
                                    <div class="sprite-label">Artwork Officiel</div>
                                </div>
                            </div>
                        </div>
                    `;
                    result.innerHTML = html;
                } else {
                    result.innerHTML = '<div class="test-result error">‚ùå Erreur lors de la r√©cup√©ration des donn√©es</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="test-result error">‚ùå Erreur: ${error.message}</div>`;
            }
        }
        
        // Lancer le test 1 au chargement
        window.onload = function() {
            test1();
        };
    </script>
</body>
</html>
